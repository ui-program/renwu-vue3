import{r as x,d as y,a as t,u as V,b as k,o as w,c as S,w as n,P as B,e as M,f as u,g as v,h as N,i as P,s as T,j as p,_ as U}from"./index-478a41f9.js";const q=r=>x({url:"/api/sms-pop/sendSmsCode",method:"POST",data:r}),I={class:"ui-m-16"},L=y({__name:"index",setup(r){const l=t(""),e=t(""),o=t(!1),d=t(!1),b=V(),i=k(),f=()=>l.value="",g=()=>e.value="",h=async()=>{try{o.value=!0,await P({mobile:e.value,code:l.value}),await i.checkLogin(),o.value=!1,T({type:"success",message:"绑定成功"}),b.back()}catch{o.value=!1}},C=()=>{d.value=!0,q({mobile:e.value}).then(a=>{console.log(a)}).catch(()=>{d.value=!1})};return w(()=>{var a;e.value=((a=i.userInfo)==null?void 0:a.mobile)||""}),(a,s)=>{const m=p("van-field"),_=p("van-button");return M(),S(B,{class:"wrapper",title:"绑定手机号"},{default:n(()=>[u(m,{modelValue:e.value,"onUpdate:modelValue":s[0]||(s[0]=c=>e.value=c),name:"mobile",label:"手机号",placeholder:"手机号",clearable:"",onClear:g,rules:[{required:!0,message:"请填写"}]},null,8,["modelValue"]),u(m,{modelValue:l.value,"onUpdate:modelValue":s[1]||(s[1]=c=>l.value=c),center:"",clearable:"",onClear:f,label:"验证码",placeholder:"请输入验证码"},{button:n(()=>[u(_,{size:"small",type:"primary",loading:d.value,onClick:C,disabled:!e.value.length},{default:n(()=>[v("发送验证码")]),_:1},8,["loading","disabled"])]),_:1},8,["modelValue"]),N("div",I,[u(_,{class:"ui-mt-20",disabled:!e.value.length||!l.value.length,loading:o.value,round:"",block:"",type:"primary",onClick:h},{default:n(()=>[v(" 提交 ")]),_:1},8,["disabled","loading"])])]),_:1})}}});const z=U(L,[["__scopeId","data-v-2b7f1698"]]);export{z as default};
